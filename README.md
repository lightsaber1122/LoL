# League Of Legends with OpenCV
#### version 0.1.0
---
## 00. Concept
### (1) 경기 중 화면에서 자동으로 데이터를 얻을 수 없을까?

경기 지표 및 데이터를 가지고 여러 분석을 하기 전에, 데이터를 얻기 위해서는 경기 데이터를 제공하는 웹페이지에서 일일이 데이터를 찾아야하는 번거로움이 있다. 필자는 이 과정을 편리하게 진행하기 위해 크롤링을 통해 원하는 경기의 데이터를 알아서 가져오도록 한 적이 있다.

그러나 실제로 자세한 분석을 위해서는 경기가 종료된 후에 정리된 지표가 아닌, 실시간으로 쌓여가는 데이터가 필요하다. 특히나 롤이라는 게임 특성상, 경기마다 라인전이 종료되는 시점이 경기별로, 라인별로 다 다르기도 하며, 각 팀의 성향에 따라 경기가 장기전이 될수도, 금새 끝날 수도 있다. 때문에 통계를 내기에는 평균의 함정에 빠질 수도 있고, 지표에 따라 결론을 내리기도 어려운 부분이 있다.

![InGame_example](./02. file/00.docs/InGame_example.jpg "23.03.19에 진행된 T1 vs NS 경기 화면 캡처")

중계화면은 우리가 원하는 데이터를 한눈에 보기 쉽도록 정리가 되어있다. 각 라인의 챔피언이 무엇인지, 각 라인별로 CS는 얼마나 챙겼는지, 아이템은 어떻게 구매했는지 등을 알 수 있어 시청자가 실시간으로 이를 파악하면서 게임의 흐름을 이해하는데 도움을 준다.

때문에 실시간으로 중계화면에 정리된 각 정보를 얻을 수 있다면 시간별로 원하는 데이터를 쌓을 수 있다. 우선 화면 상단에서는 각 팀의 진영과 현재 경기 시간, 오브젝트를 알 수 있고, 화면 하단에서는 각 팀/라인의 챔피언, CS 현황, 아이템 현황, KDA를 알 수 있다.

### (2) 경기 중일때와 그렇지 않을 때를 구분하자

사실 경기 중계 화면에는 게임 상황만 잡히는 것이 아니라, 게임을 시작하기 전 카운트 다운, 각 선수에 대한 지표 정리, 밴픽단계 등 여러 상황이 표시된다. 때문에 우선 우리가 보고있는 화면이 경기와 관련이 있는 화면인지를 구분할 필요가 있다.

#### Label 0. 경기와 관련 없는 화면

경기 시작 전 카운트 다운, 경기 홍보 영상, 광고, 팬들의 치어풀, 리플레이 등은 우리가 얻고자 하는 데이터와는 관련이 없다. 때문에 False의 의미인 0을 label로 지정해 인공지능에게 이 영상에서는 데이터를 쌓지 않아도 됨을 학습시킨다.

#### Label 1. 경기 화면

인게임 화면은 데이터를 쌓아야 하는 목표이므로 True인 1을 label로 지정한다. 화면 하단에 광고가 게재되더라도 화면 상단에서 얻을 수 있는 데이터가 있기 때문에 전체 영상을 구분할 때는 True로 간주한다.

#### Label 2. 경기와 관련이 높은 화면

*(본 내용은 삭제될 수도 있습니다.)*

경기에 돌입하기 전의 밴픽단계는 경기의 흐름을 정하는 데이터가 될 수 있고, 각 팀의 성향을 알 수 있는 데이터이기도 하다. 또한, 밴픽 데이터로 팀 뿐만 아니라 선수의 성향 및 챔프폭을 알 수 있어 수집의 필요성이 있는 데이터이다. 그러나 경기 화면(인게임)과는 데이터를 얻을 수 있는 부분이 다르기 때문에 label을 다르게하여 학습한다.

### (3) 경기 중 각 라인의 상태를 알아보자

화면 하단의 정보를 통해 각 라인의 상태를 알 수 있다. 각 라인의 어떤 챔피언이 현재 템 빌드를 통해 어떤 플레이를 하고자 하는지 알 수 있고, 현재 CS로 골드 사정을 유추하거나 라인전에서의 우세, 열세를 알 수 있고, 현재 KDA로 당장의 한타 혹은 교전이 가능한지 등을 알 수 있다.

그러나 화면 하단의 정보창에는 간혹 광고가 게재되거나, 각 라인의 골드 현황, 포탑 골드 현황 등이 표시될 때가 있다. 이럴 때는 데이터 수집을 멈추고, 표시된 데이터를 따로 수집하거나, 인공지능 모델의 구동을 멈춰야 한다.

화면을 구분하기 위한 label은 다음과 같이 정의한다.

|label|내용|
|---|---|
|0|광고 화면|
|1|라인별 정보|
|2|기타 정보 화면|

### (4) 데이터를 저장하자

데이터는 분석 및 통계에 적합하도록 출력하는 것이 좋다. 일반적으로 데이터는 엑셀파일(xlsx)로 많이 사용하지만, 필자는 또 다른 인공지능 모델의 개발에 사용되기 편하도록 csv 형태로 데이터를 저장한다.

---

## 01. 모델 설계

모델은 대부분 단순한 이미지 분류 문제이기 때문에 비슷한 구조를 가지고 있다. 그러나 만약 1초에 한 번씩 데이터를 저장해야 한다면 모든 모델이 1초 내로 동작하여 데이터를 도출해야 하므로 지속적인 실험을 통해 모델의 구조를 단순화하거나, 모델의 개수를 줄이는 등 해결 방안이 필요하다.

---

## 02. 버전 별 확인 사항

### v.0.1.0
- 기초 코드 업로드
- 이미지/동영상 테스트 수준